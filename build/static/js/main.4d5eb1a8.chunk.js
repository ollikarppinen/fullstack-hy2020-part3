(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{22:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t(1),a=t.n(r),u=t(15),o=t.n(u),s=(t(22),t(16)),i=t(3),j=t(4),l=t.n(j),d="/api/persons",b=function(){return l.a.get(d).then((function(e){return e.data}))},f=function(e){return l.a.post(d,e).then((function(e){return e.data}))},h=function(e,n){return l.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},m=function(e){return l.a.delete("".concat(d,"/").concat(e)).then((function(n){return e}))},O=function(e){var n=e.person,t=e.removePerson;return Object(c.jsxs)("div",{children:[n.name," ",n.number," ",Object(c.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(n.name,"?"))&&t(n)},children:"delete"})]})},v=function(e){var n=e.persons,t=e.nameFilter,r=e.removePerson,a=n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));return Object(c.jsx)(c.Fragment,{children:a.map((function(e){return Object(c.jsx)(O,{person:e,removePerson:r},e.name)}))})},p=t(6),x=function(e){var n=e.persons,t=e.addPerson,a=e.updatePerson,u=Object(r.useState)(""),o=Object(i.a)(u,2),s=o[0],j=o[1],l=Object(r.useState)(""),d=Object(i.a)(l,2),b=d[0],f=d[1];return Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c=n.find((function(e){var n=e.name;return s===n}));c?window.confirm("".concat(s," is already added to phonebook, replace the old number with a new one?"))&&a(Object(p.a)(Object(p.a)({},c),{},{number:b})).then((function(){j(""),f("")})):t({name:s,number:b}).then((function(){j(""),f("")}))},children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:s,onChange:function(e){var n=e.target.value;return j(n)}})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:b,onChange:function(e){var n=e.target.value;return f(n)}})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},w=function(e){var n=e.value,t=e.onChange;return Object(c.jsxs)("div",{children:["filter shown with",Object(c.jsx)("input",{value:n,onChange:t})]})},g=function(e){var n=e.message,t=e.className;return null===n?null:Object(c.jsx)("div",{className:t,children:n})},P=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],a=n[1],u=Object(r.useState)(""),o=Object(i.a)(u,2),j=o[0],l=o[1],d=Object(r.useState)(null),O=Object(i.a)(d,2),p=O[0],P=O[1],C=Object(r.useState)(null),S=Object(i.a)(C,2),k=S[0],y=S[1];Object(r.useEffect)((function(){b().then(a)}),[]);var N=function(e){P(e.response.data.error),setTimeout((function(){P(null)}),5e3)};return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(g,{className:"error",message:p}),Object(c.jsx)(g,{className:"success",message:k}),Object(c.jsx)(w,{value:j,onChange:function(e){var n=e.target.value;return l(n)}}),Object(c.jsx)("h3",{children:"add a new"}),Object(c.jsx)(x,{persons:t,addPerson:function(e){return f(e).then((function(e){a(t.concat(e)),y("".concat(e.name," was successfully added")),setTimeout((function(){y(null)}),5e3)})).catch(N)},updatePerson:function(e){var n=e.id,c=Object(s.a)(e,["id"]);return h(n,c).then((function(e){a(t.filter((function(n){var t=n.id;return e.id!==t})).concat(e)),y("".concat(e.name," was successfully updated")),setTimeout((function(){y(null)}),5e3)})).catch(N)}}),Object(c.jsx)("h3",{children:"Numbers"}),Object(c.jsx)(v,{persons:t,nameFilter:j,removePerson:function(e){var n=e.id,c=e.name;return m(n).then((function(e){a(t.filter((function(n){return n.id!==e}))),y("".concat(c," was successfully removed")),setTimeout((function(){y(null)}),5e3)})).catch(N)}})]})};o.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(P,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.4d5eb1a8.chunk.js.map